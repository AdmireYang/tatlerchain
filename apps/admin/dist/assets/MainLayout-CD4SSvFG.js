import{v as U,aD as H,aB as P,r as M,c as i,j as W,W as j,ab as o,y as O,z as r,D as t,C as e,E as s,B as E,u,Q as _,O as Q,R as m}from"./vue-vendor-C3C-az8a.js";import{d as q,b as F,p as G,e as J,f as K,c as X,s as Y,g as Z,E as $}from"./element-plus-B8SKDpVE.js";import{u as ee}from"./index-DNHOLSe2.js";import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";const oe={class:"logo-container"},ae={key:0,class:"logo-text"},ne={key:1,class:"logo-icon"},se={class:"header-left"},le={class:"header-right"},ue={class:"user-info"},ce={key:0,class:"user-name"},de={class:"user-detail"},ie={class:"user-detail-name"},re={class:"user-detail-email"},_e=U({__name:"MainLayout",setup(me){const y=H(),x=P(),d=ee(),l=M(!1),p=M(!1),C=i(()=>y.path),h=i(()=>{var a;return((a=d.user)==null?void 0:a.name)||"未知用户"}),B=i(()=>{var a;return((a=d.user)==null?void 0:a.email)||""}),D=i(()=>{var n;return(((n=d.user)==null?void 0:n.name)||"U").charAt(0).toUpperCase()});function b(){l.value=!l.value}async function k(a){if(a==="logout")try{await Z.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),d.logout(),$.success("已退出登录"),x.push("/login")}catch{}}function f(){const a=window.innerWidth;p.value=a<768,p.value&&(l.value=!0)}return W(()=>{f(),window.addEventListener("resize",f)}),j(()=>{window.removeEventListener("resize",f)}),(a,n)=>{const c=o("ElIcon"),v=o("ElMenuItem"),I=o("ElMenu"),z=o("ElAside"),A=o("ElButton"),S=o("ElAvatar"),w=o("ElDropdownItem"),V=o("ElDropdownMenu"),N=o("ElDropdown"),R=o("ElHeader"),L=o("RouterView"),T=o("ElMain"),g=o("ElContainer");return r(),O(g,{class:"layout-container"},{default:t(()=>[e(z,{width:l.value?"64px":"200px",class:"layout-aside"},{default:t(()=>[s("div",oe,[l.value?(r(),E("span",ne,"PM")):(r(),E("h2",ae,"Port Magazine"))]),e(I,{"default-active":C.value,collapse:l.value,"collapse-transition":!1,router:"",class:"layout-menu"},{default:t(()=>[e(v,{index:"/dashboard"},{title:t(()=>[...n[0]||(n[0]=[_("数据看板",-1)])]),default:t(()=>[e(c,null,{default:t(()=>[e(u(q))]),_:1})]),_:1}),e(v,{index:"/posts"},{title:t(()=>[...n[1]||(n[1]=[_("推文管理",-1)])]),default:t(()=>[e(c,null,{default:t(()=>[e(u(F))]),_:1})]),_:1}),e(v,{index:"/ads"},{title:t(()=>[...n[2]||(n[2]=[_("广告管理",-1)])]),default:t(()=>[e(c,null,{default:t(()=>[e(u(G))]),_:1})]),_:1})]),_:1},8,["default-active","collapse"])]),_:1},8,["width"]),e(g,{class:"layout-main"},{default:t(()=>[e(R,{class:"layout-header"},{default:t(()=>[s("div",se,[e(A,{icon:l.value?u(J):u(K),circle:"",onClick:b,class:"collapse-btn"},null,8,["icon"])]),s("div",le,[e(N,{onCommand:k},{dropdown:t(()=>[e(V,null,{default:t(()=>[e(w,{disabled:""},{default:t(()=>[s("div",de,[s("div",ie,m(h.value),1),s("div",re,m(B.value),1)])]),_:1}),e(w,{divided:"",command:"logout"},{default:t(()=>[e(c,null,{default:t(()=>[e(u(Y))]),_:1}),n[3]||(n[3]=s("span",null,"退出登录",-1))]),_:1})]),_:1})]),default:t(()=>[s("div",ue,[e(S,{size:32,class:"user-avatar"},{default:t(()=>[_(m(D.value),1)]),_:1}),p.value?Q("",!0):(r(),E("span",ce,m(h.value),1)),e(c,{class:"el-icon--right"},{default:t(()=>[e(u(X))]),_:1})])]),_:1})])]),_:1}),e(T,{class:"layout-content"},{default:t(()=>[e(L)]),_:1})]),_:1})]),_:1})}}}),he=te(_e,[["__scopeId","data-v-ec2aa8d8"]]);export{he as default};

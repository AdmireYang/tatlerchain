import{v as R,aB as j,j as M,ab as r,B as d,z as c,E as o,C as s,D as l,Q as m,u as a,y as F,O as J,J as O,a5 as Q,R as k,k as x}from"./vue-vendor-CaWn4O-h.js";import{n as q,p as G,o as w,E as i}from"./element-plus-Cl1iFrzV.js";import"./index-DBOFIeWp.js";import{u as H}from"./ad-4foiNQeh.js";import{u as K}from"./useTable-Dn0_eMR9.js";import{g as W}from"./ad-BecHS-Qo.js";import{L as X,s as Y}from"./ListSkeleton-C3_RQHQc.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"ads-page"},te={class:"page-header"},se={key:1},ae={key:2,class:"ad-list"},ne={class:"ad-image-wrapper"},oe={class:"image-error"},le={class:"ad-content"},ie={class:"ad-header"},re=["title","onClick"],ce={class:"ad-meta"},de={class:"ad-category"},ue={class:"ad-stats"},pe={class:"ad-actions"},me={key:3,class:"pagination-wrapper"},_e=R({__name:"Ads",setup(ge){const y=j(),C=H(),{data:h,total:z,loading:b,page:v,pageSize:_,fetchData:g,handlePageChange:S,handlePageSizeChange:I}=K(W);function B(){y.push("/ads/create")}function A(n){y.push(`/ads/edit/${n}`)}function E(n){window.open(n,"_blank")}async function T(n){try{await navigator.clipboard.writeText(n),i.success("链接已复制到剪贴板")}catch{const e=document.createElement("textarea");e.value=n,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{document.execCommand("copy"),i.success("链接已复制到剪贴板")}catch{i.error("复制失败，请手动复制")}document.body.removeChild(e)}}async function V(n,e){try{e==="ACTIVE"?(await C.update(n,{status:"INACTIVE"}),i.success("已取消在官网展示"),g()):(await C.publish(n),i.success("已发布到官网"),g())}catch{i.error("操作失败")}}async function $(n){if(await Y("这个广告"))try{await C.remove(n),i.success("删除成功"),g()}catch{i.error("删除失败")}}return M(()=>{g()}),(n,e)=>{const f=r("ElIcon"),u=r("ElButton"),P=r("ElEmpty"),U=r("ElImage"),D=r("ElCheckbox"),N=r("ElPagination"),L=r("ElCard");return c(),d("div",ee,[o("div",te,[e[3]||(e[3]=o("h1",{class:"text-2xl font-bold"},"广告管理",-1)),s(u,{type:"primary",onClick:B},{default:l(()=>[s(f,null,{default:l(()=>[s(a(q))]),_:1}),e[2]||(e[2]=m(" 新建广告 ",-1))]),_:1})]),s(L,{class:"list-card",shadow:"never"},{default:l(()=>[a(b)?(c(),F(X,{key:0,count:a(_)},null,8,["count"])):a(h).length===0?(c(),d("div",se,[s(P,{description:"暂无广告数据"})])):(c(),d("div",ae,[(c(!0),d(O,null,Q(a(h),t=>(c(),d("div",{key:t.id,class:"ad-card"},[o("div",ne,[s(U,{src:t.imageUrl,fit:"cover",class:"ad-image"},{error:l(()=>[o("div",oe,[s(f,null,{default:l(()=>[s(a(G))]),_:1})])]),_:1},8,["src"])]),o("div",le,[o("div",ie,[o("div",{class:"ad-title",title:t.title,onClick:p=>E(t.linkUrl)},k(t.title),9,re),o("div",ce,[s(D,{"model-value":t.status==="ACTIVE",onChange:p=>V(t.id,t.status),label:"在官网展示"},null,8,["model-value","onChange"]),o("span",de,k(t.category),1),o("span",ue,"点击 "+k(t.clickCount),1)])])]),o("div",pe,[s(u,{size:"small",onClick:p=>A(t.id)},{default:l(()=>[...e[4]||(e[4]=[m("编辑",-1)])]),_:1},8,["onClick"]),s(u,{size:"small",onClick:p=>E(t.linkUrl)},{default:l(()=>[s(f,null,{default:l(()=>[s(a(w))]),_:1}),e[5]||(e[5]=m(" 预览 ",-1))]),_:1},8,["onClick"]),s(u,{size:"small",onClick:p=>T(t.linkUrl)},{default:l(()=>[s(f,null,{default:l(()=>[s(a(w))]),_:1}),e[6]||(e[6]=m(" 复制链接 ",-1))]),_:1},8,["onClick"]),s(u,{size:"small",type:"danger",onClick:p=>$(t.id)},{default:l(()=>[...e[7]||(e[7]=[m("删除",-1)])]),_:1},8,["onClick"])])]))),128))])),a(h).length>0?(c(),d("div",me,[s(N,{"current-page":a(v),"onUpdate:currentPage":e[0]||(e[0]=t=>x(v)?v.value=t:null),"page-size":a(_),"onUpdate:pageSize":e[1]||(e[1]=t=>x(_)?_.value=t:null),total:a(z),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:a(S),onSizeChange:a(I)},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])):J("",!0)]),_:1})])}}}),we=Z(_e,[["__scopeId","data-v-3fdc83e4"]]);export{we as default};

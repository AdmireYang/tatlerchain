import{u as E,a as k,c as b,d as V,r as h,b as z,e as u,f as g,o as v,g as A,h as a,i as s,w as d,j as P,k as x,t as B,E as F}from"./index-CoN5ggrH.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M="/assets/logo-Dk6bwfTP.webp";function S(){const o=E(),l=k(),t=b(()=>o.user),r=b(()=>o.isAuthenticated);async function m(e){await o.login(e),await l.push("/dashboard")}function c(){o.logout(),l.push("/login")}async function n(){try{await o.getProfile()}catch(e){throw c(),e}}function i(){return o.checkAuth()}return{user:t,isAuthenticated:r,login:m,logout:c,getProfile:n,checkAuth:i}}const C={class:"login-page"},D={class:"form-section"},L={class:"form-container"},N={key:0},R={key:1},q={class:"form-footer"},K={class:"copyright"},U=V({__name:"Login",setup(o){const l=h(),t=z({email:"",password:""}),r=h(!1),m={email:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,message:"账号长度至少3位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}]},{login:c}=S();async function n(){if(l.value)try{if(!await l.value.validate())return;r.value=!0,await c(t),F.success("登录成功")}catch(i){console.error("登录失败:",i)}finally{r.value=!1}}return(i,e)=>{const _=u("ElInput"),f=u("ElFormItem"),w=u("ElButton"),y=u("ElForm");return v(),g("div",C,[e[5]||(e[5]=A('<div class="brand-section" data-v-1f521a6d><div class="brand-content" data-v-1f521a6d><div class="brand-logo" data-v-1f521a6d><img src="'+M+'" alt="Port Magazine" class="logo-img" data-v-1f521a6d></div><div class="brand-text" data-v-1f521a6d><h1 class="brand-title" data-v-1f521a6d>Port Magazine</h1><p class="brand-subtitle" data-v-1f521a6d>内容管理系统</p></div></div><div class="brand-decoration" data-v-1f521a6d><div class="decoration-line" data-v-1f521a6d></div></div></div>',1)),a("div",D,[a("div",L,[e[4]||(e[4]=a("div",{class:"form-header"},[a("h2",{class:"form-title"},"登录"),a("p",{class:"form-subtitle"},"欢迎回来，请登录您的账号")],-1)),s(y,{ref_key:"formRef",ref:l,model:t,rules:m,class:"login-form",onSubmit:x(n,["prevent"])},{default:d(()=>[s(f,{prop:"email",class:"form-item"},{default:d(()=>[e[2]||(e[2]=a("label",{class:"form-label"},"账号",-1)),s(_,{modelValue:t.email,"onUpdate:modelValue":e[0]||(e[0]=p=>t.email=p),placeholder:"请输入账号",size:"large",clearable:""},null,8,["modelValue"])]),_:1}),s(f,{prop:"password",class:"form-item"},{default:d(()=>[e[3]||(e[3]=a("label",{class:"form-label"},"密码",-1)),s(_,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=p=>t.password=p),type:"password",placeholder:"请输入密码",size:"large","show-password":"",onKeyup:P(n,["enter"])},null,8,["modelValue"])]),_:1}),s(f,{class:"form-item-button"},{default:d(()=>[s(w,{type:"primary",size:"large",loading:r.value,class:"login-button",onClick:n},{default:d(()=>[r.value?(v(),g("span",R,"登录中...")):(v(),g("span",N,"登录"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),a("div",q,[a("p",K,"© "+B(new Date().getFullYear())+" Port Magazine. 保留所有权利。",1)])])])])}}}),Y=I(U,[["__scopeId","data-v-1f521a6d"]]);export{Y as default};

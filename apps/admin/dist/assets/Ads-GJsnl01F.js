import{d as M,a as R,m as j,e as r,f as d,o as c,h as l,i as t,w as o,x as m,s as n,U as q,p as F,q as W,V as X,W as Y,z as G,t as E,X as x,Y as w,E as i}from"./index-CoN5ggrH.js";import{u as H}from"./ad--nRECU9a.js";import{u as J}from"./useTable-DJhhaOIC.js";import{g as K}from"./ad-Da1hrELk.js";import{L as O,s as Q}from"./ListSkeleton-CCOHPWiI.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"ads-page"},te={class:"page-header"},se={key:1},ne={key:2,class:"ad-list"},ae={class:"ad-image-wrapper"},oe={class:"image-error"},le={class:"ad-content"},ie={class:"ad-header"},re=["title","onClick"],ce={class:"ad-meta"},de={class:"ad-stats"},ue={class:"ad-actions"},pe={key:3,class:"pagination-wrapper"},me=M({__name:"Ads",setup(_e){const k=R(),C=H(),{data:h,total:z,loading:b,page:v,pageSize:_,fetchData:f,handlePageChange:S,handlePageSizeChange:I}=J(K);function V(){k.push("/ads/create")}function A(a){k.push(`/ads/edit/${a}`)}function y(a){window.open(a,"_blank")}async function T(a){try{await navigator.clipboard.writeText(a),i.success("链接已复制到剪贴板")}catch{const e=document.createElement("textarea");e.value=a,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{document.execCommand("copy"),i.success("链接已复制到剪贴板")}catch{i.error("复制失败，请手动复制")}document.body.removeChild(e)}}async function U(a,e){try{e==="ACTIVE"?(await C.update(a,{status:"INACTIVE"}),i.success("已取消在官网展示"),f()):(await C.publish(a),i.success("已发布到官网"),f())}catch{i.error("操作失败")}}async function $(a){if(await Q("这个广告"))try{await C.remove(a),i.success("删除成功"),f()}catch{i.error("删除失败")}}return j(()=>{f()}),(a,e)=>{const g=r("ElIcon"),u=r("ElButton"),B=r("ElEmpty"),P=r("ElImage"),N=r("ElCheckbox"),D=r("ElPagination"),L=r("ElCard");return c(),d("div",ee,[l("div",te,[e[3]||(e[3]=l("h1",{class:"text-2xl font-bold"},"广告管理",-1)),t(u,{type:"primary",onClick:V},{default:o(()=>[t(g,null,{default:o(()=>[t(n(q))]),_:1}),e[2]||(e[2]=m(" 新建广告 ",-1))]),_:1})]),t(L,{class:"list-card",shadow:"never"},{default:o(()=>[n(b)?(c(),F(O,{key:0,count:n(_)},null,8,["count"])):n(h).length===0?(c(),d("div",se,[t(B,{description:"暂无广告数据"})])):(c(),d("div",ne,[(c(!0),d(X,null,Y(n(h),s=>(c(),d("div",{key:s.id,class:"ad-card"},[l("div",ae,[t(P,{src:s.imageUrl,fit:"cover",class:"ad-image"},{error:o(()=>[l("div",oe,[t(g,null,{default:o(()=>[t(n(G))]),_:1})])]),_:1},8,["src"])]),l("div",le,[l("div",ie,[l("div",{class:"ad-title",title:s.title,onClick:p=>y(s.linkUrl)},E(s.title),9,re),l("div",ce,[t(N,{"model-value":s.status==="ACTIVE",onChange:p=>U(s.id,s.status),label:"在官网展示"},null,8,["model-value","onChange"]),l("span",de,"点击 "+E(s.clickCount),1)])])]),l("div",ue,[t(u,{size:"small",onClick:p=>A(s.id)},{default:o(()=>[...e[4]||(e[4]=[m("编辑",-1)])]),_:1},8,["onClick"]),t(u,{size:"small",onClick:p=>y(s.linkUrl)},{default:o(()=>[t(g,null,{default:o(()=>[t(n(x))]),_:1}),e[5]||(e[5]=m(" 预览 ",-1))]),_:1},8,["onClick"]),t(u,{size:"small",onClick:p=>T(s.linkUrl)},{default:o(()=>[t(g,null,{default:o(()=>[t(n(x))]),_:1}),e[6]||(e[6]=m(" 复制链接 ",-1))]),_:1},8,["onClick"]),t(u,{size:"small",type:"danger",onClick:p=>$(s.id)},{default:o(()=>[...e[7]||(e[7]=[m("删除",-1)])]),_:1},8,["onClick"])])]))),128))])),n(h).length>0?(c(),d("div",pe,[t(D,{"current-page":n(v),"onUpdate:currentPage":e[0]||(e[0]=s=>w(v)?v.value=s:null),"page-size":n(_),"onUpdate:pageSize":e[1]||(e[1]=s=>w(_)?_.value=s:null),total:n(z),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:n(S),onSizeChange:n(I)},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])):W("",!0)]),_:1})])}}}),ye=Z(me,[["__scopeId","data-v-f5b911f7"]]);export{ye as default};

import{u as k,a as x,c as _,d as V,r as w,b as A,e as c,f as m,o as v,g as o,h as z,i as t,w as u,j as b,k as B,l as I,m as P,n as C,E as F}from"./index-C6hz40a1.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";function R(){const s=k(),l=x(),a=_(()=>s.user),r=_(()=>s.isAuthenticated);async function p(e){await s.login(e),await l.push("/dashboard")}function d(){s.logout(),l.push("/login")}async function n(){try{await s.getProfile()}catch(e){throw d(),e}}function i(){return s.checkAuth()}return{user:a,isAuthenticated:r,login:p,logout:d,getProfile:n,checkAuth:i}}const S={class:"login-page"},L={class:"login-card"},N={key:0},q={key:1},K=V({__name:"Login",setup(s){const l=w(),a=A({email:"",password:""}),r=w(!1),p={email:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,message:"账号长度至少3位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}]},{login:d}=R();async function n(){if(l.value)try{if(!await l.value.validate())return;r.value=!0,await d(a),F.success("登录成功")}catch(i){console.error("登录失败:",i)}finally{r.value=!1}}return(i,e)=>{const h=c("ElInput"),g=c("ElFormItem"),y=c("ElButton"),E=c("ElForm");return v(),m("div",S,[e[4]||(e[4]=o("div",{class:"login-bg"},[o("div",{class:"bg-shape shape-1"}),o("div",{class:"bg-shape shape-2"}),o("div",{class:"bg-shape shape-3"})],-1)),o("div",L,[e[2]||(e[2]=z('<div class="login-header" data-v-69f28e21><div class="logo" data-v-69f28e21><span class="logo-text" data-v-69f28e21>PORT</span></div><h1 class="title" data-v-69f28e21>管理后台登录</h1><p class="subtitle" data-v-69f28e21>Port Magazine Admin</p></div>',1)),t(E,{ref_key:"formRef",ref:l,model:a,rules:p,class:"login-form",onSubmit:C(n,["prevent"])},{default:u(()=>[t(g,{prop:"email"},{default:u(()=>[t(h,{modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=f=>a.email=f),placeholder:"请输入账号",size:"large","prefix-icon":b(B),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),t(g,{prop:"password"},{default:u(()=>[t(h,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=f=>a.password=f),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":b(P),"show-password":"",onKeyup:I(n,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),t(g,{class:"login-button-wrapper"},{default:u(()=>[t(y,{type:"primary",size:"large",loading:r.value,class:"login-button",onClick:n},{default:u(()=>[r.value?(v(),m("span",q,"登录中...")):(v(),m("span",N,"登录"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e[3]||(e[3]=o("div",{class:"login-footer"},[o("p",{class:"copyright"},"© 2024 Port Magazine. All rights reserved.")],-1))])])}}}),D=M(K,[["__scopeId","data-v-69f28e21"]]);export{D as default};

import{d as j,p as q,a as F,u as G,r as g,c as i,q as W,s as J,e as n,t as x,o as r,w as t,i as e,g as s,f as E,v as y,j as l,x as K,y as _,z as O,A as Q,k as X,B as Y,C as Z,D as m,F as $,G as ee,H as te,E as oe}from"./index-C6hz40a1.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"logo-container"},se={key:0,class:"logo-text"},le={key:1,class:"logo-icon"},ue={class:"header-left"},de={class:"header-right"},ce={class:"user-info"},ie={key:0,class:"user-name"},re={class:"user-detail"},_e={class:"user-detail-name"},fe={class:"user-detail-email"},me=j({__name:"MainLayout",setup(pe){const C=q(),k=F(),c=G(),u=g(!1),p=g(!1),B=i(()=>C.path),w=i(()=>{var o;return((o=c.user)==null?void 0:o.name)||"未知用户"}),A=i(()=>{var o;return((o=c.user)==null?void 0:o.email)||""}),D=i(()=>{var a;return(((a=c.user)==null?void 0:a.name)||"U").charAt(0).toUpperCase()}),I=i(()=>{var o;return((o=c.user)==null?void 0:o.role)==="ADMIN"});function b(){u.value=!u.value}async function z(o){if(o==="logout")try{await te.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),c.logout(),oe.success("已退出登录"),k.push("/login")}catch{}}function v(){const o=window.innerWidth;p.value=o<768,p.value&&(u.value=!0)}return W(()=>{v(),window.addEventListener("resize",v)}),J(()=>{window.removeEventListener("resize",v)}),(o,a)=>{const d=n("ElIcon"),f=n("ElMenuItem"),N=n("ElMenu"),S=n("ElAside"),V=n("ElButton"),L=n("ElAvatar"),h=n("ElDropdownItem"),R=n("ElDropdownMenu"),H=n("ElDropdown"),T=n("ElHeader"),U=n("RouterView"),P=n("ElMain"),M=n("ElContainer");return r(),x(M,{class:"layout-container"},{default:t(()=>[e(S,{width:u.value?"64px":"200px",class:"layout-aside"},{default:t(()=>[s("div",ne,[u.value?(r(),E("span",le,"PM")):(r(),E("h2",se,"Port Magazine"))]),e(N,{"default-active":B.value,collapse:u.value,"collapse-transition":!1,router:"",class:"layout-menu"},{default:t(()=>[e(f,{index:"/dashboard"},{title:t(()=>[...a[0]||(a[0]=[_("数据看板",-1)])]),default:t(()=>[e(d,null,{default:t(()=>[e(l(K))]),_:1})]),_:1}),e(f,{index:"/posts"},{title:t(()=>[...a[1]||(a[1]=[_("推文管理",-1)])]),default:t(()=>[e(d,null,{default:t(()=>[e(l(O))]),_:1})]),_:1}),e(f,{index:"/ads"},{title:t(()=>[...a[2]||(a[2]=[_("广告管理",-1)])]),default:t(()=>[e(d,null,{default:t(()=>[e(l(Q))]),_:1})]),_:1}),I.value?(r(),x(f,{key:0,index:"/users"},{title:t(()=>[...a[3]||(a[3]=[_("账号管理",-1)])]),default:t(()=>[e(d,null,{default:t(()=>[e(l(X))]),_:1})]),_:1})):y("",!0)]),_:1},8,["default-active","collapse"])]),_:1},8,["width"]),e(M,{class:"layout-main"},{default:t(()=>[e(T,{class:"layout-header"},{default:t(()=>[s("div",ue,[e(V,{icon:u.value?l(Y):l(Z),circle:"",onClick:b,class:"collapse-btn"},null,8,["icon"])]),s("div",de,[e(H,{onCommand:z},{dropdown:t(()=>[e(R,null,{default:t(()=>[e(h,{disabled:""},{default:t(()=>[s("div",re,[s("div",_e,m(w.value),1),s("div",fe,m(A.value),1)])]),_:1}),e(h,{divided:"",command:"logout"},{default:t(()=>[e(d,null,{default:t(()=>[e(l(ee))]),_:1}),a[4]||(a[4]=s("span",null,"退出登录",-1))]),_:1})]),_:1})]),default:t(()=>[s("div",ce,[e(L,{size:32,class:"user-avatar"},{default:t(()=>[_(m(D.value),1)]),_:1}),p.value?y("",!0):(r(),E("span",ie,m(w.value),1)),e(d,{class:"el-icon--right"},{default:t(()=>[e(l($))]),_:1})])]),_:1})])]),_:1}),e(P,{class:"layout-content"},{default:t(()=>[e(U)]),_:1})]),_:1})]),_:1})}}}),we=ae(me,[["__scopeId","data-v-8c737281"]]);export{we as default};

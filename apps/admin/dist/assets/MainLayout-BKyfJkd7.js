import{d as q,l as F,a as G,u as W,r as x,c as i,m as j,n as J,e as n,p as y,o as r,w as t,i as e,h as s,f as E,q as g,s as l,v as K,x as _,y as O,z as Q,A as X,B as Y,C as Z,t as f,D as $,F as ee,G as te,E as oe}from"./index-B14LQPlx.js";import{_ as ae}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ne={class:"logo-container"},se={key:0,class:"logo-text"},le={key:1,class:"logo-icon"},ue={class:"header-left"},de={class:"header-right"},ce={class:"user-info"},ie={key:0,class:"user-name"},re={class:"user-detail"},_e={class:"user-detail-name"},me={class:"user-detail-email"},fe=q({__name:"MainLayout",setup(pe){const C=F(),B=G(),c=W(),u=x(!1),p=x(!1),k=i(()=>C.path),w=i(()=>{var o;return((o=c.user)==null?void 0:o.name)||"未知用户"}),A=i(()=>{var o;return((o=c.user)==null?void 0:o.email)||""}),D=i(()=>{var a;return(((a=c.user)==null?void 0:a.name)||"U").charAt(0).toUpperCase()}),I=i(()=>{var o;return((o=c.user)==null?void 0:o.role)==="ADMIN"});function b(){u.value=!u.value}async function z(o){if(o==="logout")try{await te.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),c.logout(),oe.success("已退出登录"),B.push("/login")}catch{}}function v(){const o=window.innerWidth;p.value=o<768,p.value&&(u.value=!0)}return j(()=>{v(),window.addEventListener("resize",v)}),J(()=>{window.removeEventListener("resize",v)}),(o,a)=>{const d=n("ElIcon"),m=n("ElMenuItem"),N=n("ElMenu"),S=n("ElAside"),V=n("ElButton"),L=n("ElAvatar"),h=n("ElDropdownItem"),R=n("ElDropdownMenu"),T=n("ElDropdown"),U=n("ElHeader"),H=n("RouterView"),P=n("ElMain"),M=n("ElContainer");return r(),y(M,{class:"layout-container"},{default:t(()=>[e(S,{width:u.value?"64px":"200px",class:"layout-aside"},{default:t(()=>[s("div",ne,[u.value?(r(),E("span",le,"PM")):(r(),E("h2",se,"Port Magazine"))]),e(N,{"default-active":k.value,collapse:u.value,"collapse-transition":!1,router:"",class:"layout-menu"},{default:t(()=>[e(m,{index:"/dashboard"},{title:t(()=>[...a[0]||(a[0]=[_("数据看板",-1)])]),default:t(()=>[e(d,null,{default:t(()=>[e(l(K))]),_:1})]),_:1}),e(m,{index:"/posts"},{title:t(()=>[...a[1]||(a[1]=[_("推文管理",-1)])]),default:t(()=>[e(d,null,{default:t(()=>[e(l(O))]),_:1})]),_:1}),e(m,{index:"/ads"},{title:t(()=>[...a[2]||(a[2]=[_("广告管理",-1)])]),default:t(()=>[e(d,null,{default:t(()=>[e(l(Q))]),_:1})]),_:1}),I.value?(r(),y(m,{key:0,index:"/users"},{title:t(()=>[...a[3]||(a[3]=[_("账号管理",-1)])]),default:t(()=>[e(d,null,{default:t(()=>[e(l(X))]),_:1})]),_:1})):g("",!0)]),_:1},8,["default-active","collapse"])]),_:1},8,["width"]),e(M,{class:"layout-main"},{default:t(()=>[e(U,{class:"layout-header"},{default:t(()=>[s("div",ue,[e(V,{icon:u.value?l(Y):l(Z),circle:"",onClick:b,class:"collapse-btn"},null,8,["icon"])]),s("div",de,[e(T,{onCommand:z},{dropdown:t(()=>[e(R,null,{default:t(()=>[e(h,{disabled:""},{default:t(()=>[s("div",re,[s("div",_e,f(w.value),1),s("div",me,f(A.value),1)])]),_:1}),e(h,{divided:"",command:"logout"},{default:t(()=>[e(d,null,{default:t(()=>[e(l(ee))]),_:1}),a[4]||(a[4]=s("span",null,"退出登录",-1))]),_:1})]),_:1})]),default:t(()=>[s("div",ce,[e(L,{size:32,class:"user-avatar"},{default:t(()=>[_(f(D.value),1)]),_:1}),p.value?g("",!0):(r(),E("span",ie,f(w.value),1)),e(d,{class:"el-icon--right"},{default:t(()=>[e(l($))]),_:1})])]),_:1})])]),_:1}),e(P,{class:"layout-content"},{default:t(()=>[e(H)]),_:1})]),_:1})]),_:1})}}}),we=ae(fe,[["__scopeId","data-v-8c737281"]]);export{we as default};

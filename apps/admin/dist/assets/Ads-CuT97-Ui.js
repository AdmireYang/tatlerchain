import{v as R,aB as j,j as M,ab as r,B as d,z as c,E as a,C as s,D as l,Q as m,u as n,y as F,O as J,J as O,a5 as Q,R as C,k as x}from"./vue-vendor-CaWn4O-h.js";import{n as q,p as G,o as w,E as i}from"./element-plus-Cl1iFrzV.js";import"./index-Bq8XV1Pd.js";import{u as H}from"./ad-BLk_47gx.js";import{u as K}from"./useTable-Dn0_eMR9.js";import{g as W}from"./ad-ThmeSIf2.js";import{L as X,s as Y}from"./ListSkeleton-C3_RQHQc.js";import{_ as Z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"ads-page"},te={class:"page-header"},se={key:1},ne={key:2,class:"ad-list"},oe={class:"ad-image-wrapper"},ae={class:"image-error"},le={class:"ad-content"},ie={class:"ad-header"},re=["title","onClick"],ce={class:"ad-meta"},de={class:"ad-category"},ue={class:"ad-stats"},pe={class:"ad-actions"},me={key:3,class:"pagination-wrapper"},_e=R({__name:"Ads",setup(ge){const y=j(),h=H(),{data:v,total:z,loading:b,page:k,pageSize:_,fetchData:g,handlePageChange:S,handlePageSizeChange:I}=K(W);function B(){y.push("/ads/create")}function A(o){y.push(`/ads/edit/${o}`)}function E(o){window.open(o,"_blank")}async function T(o){try{await navigator.clipboard.writeText(o),i.success("链接已复制到剪贴板")}catch{const e=document.createElement("textarea");e.value=o,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{document.execCommand("copy"),i.success("链接已复制到剪贴板")}catch{i.error("复制失败，请手动复制")}document.body.removeChild(e)}}async function V(o,e){try{e==="ACTIVE"?(await h.update(o,{status:"INACTIVE"}),i.success("已取消在官网展示"),g()):(await h.publish(o),i.success("已发布到官网"),g())}catch{i.error("操作失败")}}async function $(o){if(await Y("这个广告"))try{await h.remove(o),i.success("删除成功"),g()}catch{i.error("删除失败")}}return M(()=>{g()}),(o,e)=>{const f=r("ElIcon"),u=r("ElButton"),P=r("ElEmpty"),U=r("ElImage"),D=r("ElCheckbox"),N=r("ElPagination"),L=r("ElCard");return c(),d("div",ee,[a("div",te,[e[3]||(e[3]=a("h1",{class:"text-2xl font-bold"},"广告管理",-1)),s(u,{type:"primary",onClick:B},{default:l(()=>[s(f,null,{default:l(()=>[s(n(q))]),_:1}),e[2]||(e[2]=m(" 新建广告 ",-1))]),_:1})]),s(L,{class:"list-card",shadow:"never"},{default:l(()=>[n(b)?(c(),F(X,{key:0,count:n(_)},null,8,["count"])):n(v).length===0?(c(),d("div",se,[s(P,{description:"暂无广告数据"})])):(c(),d("div",ne,[(c(!0),d(O,null,Q(n(v),t=>(c(),d("div",{key:t.id,class:"ad-card"},[a("div",oe,[s(U,{src:t.imageUrl,fit:"cover",class:"ad-image"},{error:l(()=>[a("div",ae,[s(f,null,{default:l(()=>[s(n(G))]),_:1})])]),_:1},8,["src"])]),a("div",le,[a("div",ie,[a("div",{class:"ad-title",title:t.title,onClick:p=>E(t.linkUrl)},C(t.title),9,re),a("div",ce,[s(D,{"model-value":t.status==="ACTIVE",onChange:p=>V(t.id,t.status),label:"在官网展示"},null,8,["model-value","onChange"]),a("span",de,C(t.category),1),a("span",ue,"点击 "+C(t.clickCount)+" · 展示 "+C(t.impressionCount),1)])])]),a("div",pe,[s(u,{size:"small",onClick:p=>A(t.id)},{default:l(()=>[...e[4]||(e[4]=[m("编辑",-1)])]),_:1},8,["onClick"]),s(u,{size:"small",onClick:p=>E(t.linkUrl)},{default:l(()=>[s(f,null,{default:l(()=>[s(n(w))]),_:1}),e[5]||(e[5]=m(" 预览 ",-1))]),_:1},8,["onClick"]),s(u,{size:"small",onClick:p=>T(t.linkUrl)},{default:l(()=>[s(f,null,{default:l(()=>[s(n(w))]),_:1}),e[6]||(e[6]=m(" 复制链接 ",-1))]),_:1},8,["onClick"]),s(u,{size:"small",type:"danger",onClick:p=>$(t.id)},{default:l(()=>[...e[7]||(e[7]=[m("删除",-1)])]),_:1},8,["onClick"])])]))),128))])),n(v).length>0?(c(),d("div",me,[s(N,{"current-page":n(k),"onUpdate:currentPage":e[0]||(e[0]=t=>x(k)?k.value=t:null),"page-size":n(_),"onUpdate:pageSize":e[1]||(e[1]=t=>x(_)?_.value=t:null),total:n(z),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:n(S),onSizeChange:n(I)},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])):J("",!0)]),_:1})])}}}),we=Z(_e,[["__scopeId","data-v-34bb1c1f"]]);export{we as default};

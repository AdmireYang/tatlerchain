import{d as j,a as M,q as R,e as r,f as d,o as c,g as l,i as t,w as o,y as m,j as n,V as q,t as F,v as W,W as X,X as Y,A as Z,D as E,Y as w,Z as x,E as i}from"./index-CZtEAQEH.js";import{u as G}from"./ad-C6d_HDAa.js";import{u as H}from"./useTable-CbtuGw_t.js";import{g as J}from"./ad-83Jsv7Xi.js";import{L as K,s as O}from"./ListSkeleton-DC3X_gDe.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ee={class:"ads-page"},te={class:"page-header"},se={key:1},ne={key:2,class:"ad-list"},ae={class:"ad-image-wrapper"},oe={class:"image-error"},le={class:"ad-content"},ie={class:"ad-header"},re=["title","onClick"],ce={class:"ad-meta"},de={class:"ad-stats"},ue={class:"ad-actions"},pe={key:3,class:"pagination-wrapper"},me=j({__name:"Ads",setup(_e){const k=M(),C=G(),{data:h,total:z,loading:b,page:v,pageSize:_,fetchData:g,handlePageChange:S,handlePageSizeChange:I}=H(J);function A(){k.push("/ads/create")}function V(a){k.push(`/ads/edit/${a}`)}function y(a){window.open(a,"_blank")}async function T(a){try{await navigator.clipboard.writeText(a),i.success("链接已复制到剪贴板")}catch{const e=document.createElement("textarea");e.value=a,e.style.position="fixed",e.style.opacity="0",document.body.appendChild(e),e.select();try{document.execCommand("copy"),i.success("链接已复制到剪贴板")}catch{i.error("复制失败，请手动复制")}document.body.removeChild(e)}}async function $(a,e){try{e==="ACTIVE"?(await C.update(a,{status:"INACTIVE"}),i.success("已取消在官网展示"),g()):(await C.publish(a),i.success("已发布到官网"),g())}catch{i.error("操作失败")}}async function B(a){if(await O("这个广告"))try{await C.remove(a),i.success("删除成功"),g()}catch{i.error("删除失败")}}return R(()=>{g()}),(a,e)=>{const f=r("ElIcon"),u=r("ElButton"),P=r("ElEmpty"),U=r("ElImage"),D=r("ElCheckbox"),N=r("ElPagination"),L=r("ElCard");return c(),d("div",ee,[l("div",te,[e[3]||(e[3]=l("h1",{class:"text-2xl font-bold"},"广告管理",-1)),t(u,{type:"primary",onClick:A},{default:o(()=>[t(f,null,{default:o(()=>[t(n(q))]),_:1}),e[2]||(e[2]=m(" 新建广告 ",-1))]),_:1})]),t(L,{class:"list-card",shadow:"never"},{default:o(()=>[n(b)?(c(),F(K,{key:0,count:n(_)},null,8,["count"])):n(h).length===0?(c(),d("div",se,[t(P,{description:"暂无广告数据"})])):(c(),d("div",ne,[(c(!0),d(X,null,Y(n(h),s=>(c(),d("div",{key:s.id,class:"ad-card"},[l("div",ae,[t(U,{src:s.imageUrl,fit:"cover",class:"ad-image"},{error:o(()=>[l("div",oe,[t(f,null,{default:o(()=>[t(n(Z))]),_:1})])]),_:1},8,["src"])]),l("div",le,[l("div",ie,[l("div",{class:"ad-title",title:s.title,onClick:p=>y(s.linkUrl)},E(s.title),9,re),l("div",ce,[t(D,{"model-value":s.status==="ACTIVE",onChange:p=>$(s.id,s.status),label:"在官网展示"},null,8,["model-value","onChange"]),l("span",de,"点击 "+E(s.clickCount),1)])])]),l("div",ue,[t(u,{size:"small",onClick:p=>V(s.id)},{default:o(()=>[...e[4]||(e[4]=[m("编辑",-1)])]),_:1},8,["onClick"]),t(u,{size:"small",onClick:p=>y(s.linkUrl)},{default:o(()=>[t(f,null,{default:o(()=>[t(n(w))]),_:1}),e[5]||(e[5]=m(" 预览 ",-1))]),_:1},8,["onClick"]),t(u,{size:"small",onClick:p=>T(s.linkUrl)},{default:o(()=>[t(f,null,{default:o(()=>[t(n(w))]),_:1}),e[6]||(e[6]=m(" 复制链接 ",-1))]),_:1},8,["onClick"]),t(u,{size:"small",type:"danger",onClick:p=>B(s.id)},{default:o(()=>[...e[7]||(e[7]=[m("删除",-1)])]),_:1},8,["onClick"])])]))),128))])),n(h).length>0?(c(),d("div",pe,[t(N,{"current-page":n(v),"onUpdate:currentPage":e[0]||(e[0]=s=>x(v)?v.value=s:null),"page-size":n(_),"onUpdate:pageSize":e[1]||(e[1]=s=>x(_)?_.value=s:null),total:n(z),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:n(S),onSizeChange:n(I)},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])):W("",!0)]),_:1})])}}}),ye=Q(me,[["__scopeId","data-v-f5b911f7"]]);export{ye as default};

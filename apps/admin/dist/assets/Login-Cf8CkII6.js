import{aB as k,c as _,v as x,r as b,l as V,ab as c,B as f,z as v,E as s,aC as A,C as t,D as u,u as w,am as B,Y as z}from"./vue-vendor-C3C-az8a.js";import{u as C,l as I,E as P}from"./element-plus-B8SKDpVE.js";import{u as F}from"./index-DNHOLSe2.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";function R(){const o=F(),l=k(),a=_(()=>o.user),r=_(()=>o.isAuthenticated);async function p(e){await o.login(e),await l.push("/dashboard")}function d(){o.logout(),l.push("/login")}async function n(){try{await o.getProfile()}catch(e){throw d(),e}}function i(){return o.checkAuth()}return{user:a,isAuthenticated:r,login:p,logout:d,getProfile:n,checkAuth:i}}const S={class:"login-page"},L={class:"login-card"},N={key:0},q={key:1},D=x({__name:"Login",setup(o){const l=b(),a=V({email:"",password:""}),r=b(!1),p={email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}]},{login:d}=R();async function n(){if(l.value)try{if(!await l.value.validate())return;r.value=!0,await d(a),P.success("登录成功")}catch(i){console.error("登录失败:",i)}finally{r.value=!1}}return(i,e)=>{const h=c("ElInput"),m=c("ElFormItem"),y=c("ElButton"),E=c("ElForm");return v(),f("div",S,[e[4]||(e[4]=s("div",{class:"login-bg"},[s("div",{class:"bg-shape shape-1"}),s("div",{class:"bg-shape shape-2"}),s("div",{class:"bg-shape shape-3"})],-1)),s("div",L,[e[2]||(e[2]=A('<div class="login-header" data-v-3aa842b6><div class="logo" data-v-3aa842b6><span class="logo-text" data-v-3aa842b6>PORT</span></div><h1 class="title" data-v-3aa842b6>管理后台登录</h1><p class="subtitle" data-v-3aa842b6>Port Magazine Admin</p></div>',1)),t(E,{ref_key:"formRef",ref:l,model:a,rules:p,class:"login-form",onSubmit:z(n,["prevent"])},{default:u(()=>[t(m,{prop:"email"},{default:u(()=>[t(h,{modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=g=>a.email=g),type:"email",placeholder:"请输入邮箱",size:"large","prefix-icon":w(C),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,{prop:"password"},{default:u(()=>[t(h,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=g=>a.password=g),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":w(I),"show-password":"",onKeyup:B(n,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,{class:"login-button-wrapper"},{default:u(()=>[t(y,{type:"primary",size:"large",loading:r.value,class:"login-button",onClick:n},{default:u(()=>[r.value?(v(),f("span",q,"登录中...")):(v(),f("span",N,"登录"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e[3]||(e[3]=s("div",{class:"login-footer"},[s("p",{class:"copyright"},"© 2024 Port Magazine. All rights reserved.")],-1))])])}}}),Y=M(D,[["__scopeId","data-v-3aa842b6"]]);export{Y as default};

import{v as L,aB as N,j as R,ab as i,B as c,z as r,E as o,C as n,D as l,Q as p,u as a,y as j,O as M,J as F,a5 as J,R as O,k as E}from"./vue-vendor-C3C-az8a.js";import{n as Q,p as q,E as d}from"./element-plus-B8SKDpVE.js";import"./index-DNHOLSe2.js";import{u as G}from"./ad-vY6PyPxr.js";import{u as H,L as K,a as W}from"./ListSkeleton-_MKWwpuj.js";import{g as X}from"./ad-CPOBFm2I.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"ads-page"},ee={class:"page-header"},te={key:1},ne={key:2,class:"ad-list"},ae={class:"ad-image-wrapper"},se={class:"image-error"},oe={class:"ad-content"},le={class:"ad-header"},ie=["title"],re={class:"ad-meta"},de={class:"ad-actions"},ce={key:3,class:"pagination-wrapper"},ue=L({__name:"Ads",setup(pe){const v=N(),h=G(),{data:g,total:y,loading:w,page:f,pageSize:m,fetchData:C,handlePageChange:z,handlePageSizeChange:x}=H(X);function b(){v.push("/ads/create")}function S(s){v.push(`/ads/edit/${s}`)}function B(s){window.open(s,"_blank")}async function I(s){try{await navigator.clipboard.writeText(s),d.success("链接已复制到剪贴板")}catch{d.error("复制失败，请手动复制")}}async function A(s,e){try{e==="ACTIVE"?d.warning("取消发布功能待实现"):(await h.publish(s),d.success("已发布到前台"),C())}catch{d.error("操作失败")}}async function P(s){if(await W("这个广告"))try{await h.remove(s),d.success("删除成功"),C()}catch{d.error("删除失败")}}return R(()=>{C()}),(s,e)=>{const k=i("ElIcon"),u=i("ElButton"),T=i("ElEmpty"),V=i("ElImage"),$=i("ElCheckbox"),D=i("ElPagination"),U=i("ElCard");return r(),c("div",Z,[o("div",ee,[e[3]||(e[3]=o("h1",{class:"text-2xl font-bold"},"广告管理",-1)),n(u,{type:"primary",onClick:b},{default:l(()=>[n(k,null,{default:l(()=>[n(a(Q))]),_:1}),e[2]||(e[2]=p(" 新建广告 ",-1))]),_:1})]),n(U,{class:"list-card",shadow:"never"},{default:l(()=>[a(w)?(r(),j(K,{key:0,count:a(m)},null,8,["count"])):a(g).length===0?(r(),c("div",te,[n(T,{description:"暂无广告数据"})])):(r(),c("div",ne,[(r(!0),c(F,null,J(a(g),t=>(r(),c("div",{key:t.id,class:"ad-card"},[o("div",ae,[n(V,{src:t.imageUrl,fit:"cover",class:"ad-image"},{error:l(()=>[o("div",se,[n(k,null,{default:l(()=>[n(a(q))]),_:1})])]),_:1},8,["src"])]),o("div",oe,[o("div",le,[o("div",{class:"ad-title",title:t.title},O(t.title),9,ie),o("div",re,[n($,{"model-value":t.status==="ACTIVE",onChange:_=>A(t.id,t.status),label:"在前台展示"},null,8,["model-value","onChange"])])])]),o("div",de,[n(u,{size:"small",onClick:_=>S(t.id)},{default:l(()=>[...e[4]||(e[4]=[p("编辑",-1)])]),_:1},8,["onClick"]),n(u,{size:"small",onClick:_=>B(t.linkUrl)},{default:l(()=>[...e[5]||(e[5]=[p("预览",-1)])]),_:1},8,["onClick"]),n(u,{size:"small",type:"danger",onClick:_=>P(t.id)},{default:l(()=>[...e[6]||(e[6]=[p("删除",-1)])]),_:1},8,["onClick"]),n(u,{size:"small",onClick:_=>I(t.linkUrl)},{default:l(()=>[...e[7]||(e[7]=[p("复制链接",-1)])]),_:1},8,["onClick"])])]))),128))])),a(g).length>0?(r(),c("div",ce,[n(D,{"current-page":a(f),"onUpdate:currentPage":e[0]||(e[0]=t=>E(f)?f.value=t:null),"page-size":a(m),"onUpdate:pageSize":e[1]||(e[1]=t=>E(m)?m.value=t:null),total:a(y),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:a(z),onSizeChange:a(x)},null,8,["current-page","page-size","total","onCurrentChange","onSizeChange"])])):M("",!0)]),_:1})])}}}),ke=Y(ue,[["__scopeId","data-v-c60148cb"]]);export{ke as default};

import{aB as k,c as _,v as x,r as w,l as V,ab as c,B as g,z as v,E as s,aC as A,C as t,D as u,u as b,am as B,Y as z}from"./vue-vendor-CaWn4O-h.js";import{u as C,l as I,E as P}from"./element-plus-Cl1iFrzV.js";import{u as F}from"./index-Bq8XV1Pd.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";function R(){const o=F(),r=k(),a=_(()=>o.user),l=_(()=>o.isAuthenticated);async function p(e){await o.login(e),await r.push("/dashboard")}function d(){o.logout(),r.push("/login")}async function n(){try{await o.getProfile()}catch(e){throw d(),e}}function i(){return o.checkAuth()}return{user:a,isAuthenticated:l,login:p,logout:d,getProfile:n,checkAuth:i}}const S={class:"login-page"},L={class:"login-card"},N={key:0},q={key:1},D=x({__name:"Login",setup(o){const r=w(),a=V({email:"",password:""}),l=w(!1),p={email:[{required:!0,message:"请输入账号",trigger:"blur"},{min:3,message:"账号长度至少3位",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6个字符",trigger:"blur"}]},{login:d}=R();async function n(){if(r.value)try{if(!await r.value.validate())return;l.value=!0,await d(a),P.success("登录成功")}catch(i){console.error("登录失败:",i)}finally{l.value=!1}}return(i,e)=>{const h=c("ElInput"),m=c("ElFormItem"),y=c("ElButton"),E=c("ElForm");return v(),g("div",S,[e[4]||(e[4]=s("div",{class:"login-bg"},[s("div",{class:"bg-shape shape-1"}),s("div",{class:"bg-shape shape-2"}),s("div",{class:"bg-shape shape-3"})],-1)),s("div",L,[e[2]||(e[2]=A('<div class="login-header" data-v-69f28e21><div class="logo" data-v-69f28e21><span class="logo-text" data-v-69f28e21>PORT</span></div><h1 class="title" data-v-69f28e21>管理后台登录</h1><p class="subtitle" data-v-69f28e21>Port Magazine Admin</p></div>',1)),t(E,{ref_key:"formRef",ref:r,model:a,rules:p,class:"login-form",onSubmit:z(n,["prevent"])},{default:u(()=>[t(m,{prop:"email"},{default:u(()=>[t(h,{modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=f=>a.email=f),placeholder:"请输入账号",size:"large","prefix-icon":b(C),clearable:""},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,{prop:"password"},{default:u(()=>[t(h,{modelValue:a.password,"onUpdate:modelValue":e[1]||(e[1]=f=>a.password=f),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":b(I),"show-password":"",onKeyup:B(n,["enter"])},null,8,["modelValue","prefix-icon"])]),_:1}),t(m,{class:"login-button-wrapper"},{default:u(()=>[t(y,{type:"primary",size:"large",loading:l.value,class:"login-button",onClick:n},{default:u(()=>[l.value?(v(),g("span",q,"登录中...")):(v(),g("span",N,"登录"))]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),e[3]||(e[3]=s("div",{class:"login-footer"},[s("p",{class:"copyright"},"© 2024 Port Magazine. All rights reserved.")],-1))])])}}}),Y=M(D,[["__scopeId","data-v-69f28e21"]]);export{Y as default};
